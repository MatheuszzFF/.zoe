{
  "_metadata": {
    "command_name": "zoe-health",
    "version": "1.0",
    "format": "json",
    "description": "Diagn√≥stico autom√°tico da sa√∫de do Sistema Zoe",
    "created": "2025-06-10",
    "phase": "2.0 - Health Check",
    "ai_optimized": true
  },
  
  "trigger": {
    "patterns": [
      "zoe health",
      "zoe health check", 
      "zoe diagn√≥stico",
      "zoe status"
    ],
    "priority_level": 4,
    "category": "system-maintenance"
  },

  "behavior": {
    "description": "An√°lise completa da integridade do sistema Zoe",
    "checks": [
      {
        "category": "structural_integrity",
        "name": "Verifica√ß√£o Estrutural",
        "validations": [
          {
            "check": "active-project.json exists and valid",
            "file": ".zoe/rules/context/active-project.json",
            "validation": "JSON v√°lido com active_project definido"
          },
          {
            "check": "priority-map.json consistent",
            "file": ".zoe/rules/priority-map.json", 
            "validation": "Todos os arquivos referenciados existem"
          },
          {
            "check": "no orphaned .mdc files",
            "scan": ".zoe/rules/actions/",
            "validation": "Sem arquivos .mdc redundantes de 47 bytes"
          },
          {
            "check": "no deprecated progress structure",
            "path": ".zoe/rules/progress/",
            "validation": "Pasta n√£o deve existir (depreciada)"
          }
        ]
      },
      {
        "category": "project_consistency",
        "name": "Consist√™ncia de Projetos",
        "validations": [
          {
            "check": "active project exists in context",
            "validation": "Projeto ativo tem pasta em context/projects/"
          },
          {
            "check": "project contexts valid",
            "scan": ".zoe/rules/context/projects/*/project-context.json",
            "validation": "Todos os project-context.json s√£o JSON v√°lidos"
          },
          {
            "check": "no ghost projects",
            "validation": "Projetos em context/ existem no workspace real"
          }
        ]
      },
      {
        "category": "workspace_sync",
        "name": "Sincroniza√ß√£o com Workspace",
        "validations": [
          {
            "check": "detect new projects",
            "scan": "*/package.json",
            "validation": "Identificar projetos n√£o mapeados na Zoe"
          },
          {
            "check": "removed projects cleanup",
            "validation": "Remover contextos de projetos que n√£o existem mais"
          }
        ]
      },
      {
        "category": "system_performance",
        "name": "Performance do Sistema",
        "metrics": [
          {
            "metric": "command_response_time",
            "target": "< 2 segundos para comandos b√°sicos"
          },
          {
            "metric": "file_size_efficiency",
            "scan": ".zoe/rules/",
            "validation": "Arquivos > 100KB precisam revis√£o"
          }
        ]
      }
    ],
    
    "reporting": {
      "format": "structured_report",
      "sections": [
        {
          "section": "health_summary",
          "content": "üè• **HEALTH CHECK SUMMARY**\n‚úÖ Checks Passed: [count]\n‚ùå Issues Found: [count]\n‚ö†Ô∏è Warnings: [count]"
        },
        {
          "section": "detailed_results", 
          "content": "Per-category breakdown with specific issues"
        },
        {
          "section": "auto_fixes",
          "content": "Lista de problemas que podem ser corrigidos automaticamente"
        },
        {
          "section": "manual_actions",
          "content": "A√ß√µes que requerem interven√ß√£o manual"
        },
        {
          "section": "recommendations",
          "content": "Sugest√µes de melhorias baseadas na an√°lise"
        }
      ]
    },

    "auto_fixes": {
      "enabled": true,
      "safe_fixes": [
        {
          "issue": "missing project structure",
          "fix": "Create missing folders and basic project-context.json"
        },
        {
          "issue": "invalid active-project reference",
          "fix": "Reset to first valid project or prompt user to choose"
        },
        {
          "issue": "orphaned .mdc files",
          "fix": "Remove redundant .mdc files if .json version exists"
        }
      ],
      "manual_fixes": [
        {
          "issue": "corrupted project-context.json",
          "suggestion": "Review and manually fix JSON syntax"
        },
        {
          "issue": "workspace-context mismatch",
          "suggestion": "Run 'zoe sync' to synchronize projects"
        }
      ]
    }
  },

  "integration": {
    "files_read": [
      ".zoe/rules/context/active-project.json",
      ".zoe/rules/priority-map.json",
      ".zoe/rules/context/projects/*/project-context.json",
      "*/package.json"
    ],
    "workspace_scan": true,
    "performance_monitoring": true
  },

  "output_templates": {
    "healthy_system": {
      "format": "üü¢ **SISTEMA ZOE SAUD√ÅVEL**\n\n‚úÖ Estrutura: √çntegra\n‚úÖ Projetos: Sincronizados\n‚úÖ Performance: √ìtima\n\nüéØ **Pr√≥ximas sugest√µes:** [based on analysis]"
    },
    "issues_found": {
      "format": "üü° **PROBLEMAS DETECTADOS**\n\n‚ùå **Cr√≠ticos:** [count]\n‚ö†Ô∏è **Avisos:** [count]\n\nüîß **Auto-corre√ß√µes dispon√≠veis:** [list]\nüìù **A√ß√µes manuais:** [list]"
    }
  }
} 