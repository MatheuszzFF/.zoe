{
  "_metadata": {
    "command_name": "update-stack",
    "version": "1.0",
    "format": "json", 
    "description": "Detec√ß√£o e atualiza√ß√£o autom√°tica da stack tecnol√≥gica",
    "created": "2025-06-08",
    "ai_optimized": true
  },
  
  "trigger": {
    "patterns": [
      "atualizar stack",
      "atualizar stack tecnol√≥gica",
      "update stack"
    ],
    "priority_level": 13,
    "category": "organization"
  },

  "behavior": {
    "description": "Detectar automaticamente e atualizar informa√ß√µes da stack",
    "phases": [
      {
        "phase": 1,
        "name": "auto_detection",
        "description": "Detec√ß√£o autom√°tica da stack atrav√©s dos arquivos de configura√ß√£o",
        "config_files": {
          "package.json": ["React", "Next.js", "TypeScript", "dependencies"],
          "tailwind.config.js": ["Tailwind CSS configuration"],
          "vitest.config.ts": ["Vitest testing setup"], 
          "tsconfig.json": ["TypeScript configuration"],
          "next.config.js": ["Next.js configuration"],
          ".storybook/": ["Storybook documentation setup"]
        }
      },
      {
        "phase": 2, 
        "name": "dependency_analysis",
        "description": "An√°lise detalhada das depend√™ncias instaladas",
        "detection_targets": {
          "frontend_framework": "React version detection",
          "meta_framework": "Next.js version detection",
          "styling": "Tailwind/Styled-components detection",
          "testing": "Vitest/Jest + testing-library detection",
          "state_management": "Zustand/Redux/Context detection",
          "forms": "React Hook Form/Formik detection", 
          "http_client": "Axios/SWR/TanStack Query detection",
          "documentation": "Storybook setup detection"
        }
      },
      {
        "phase": 3,
        "name": "configuration_check",
        "description": "Verifica√ß√£o do status de configura√ß√£o de cada tecnologia",
        "status_levels": {
          "installed_configured": "‚úÖ Instalada e configurada",
          "installed_misconfigured": "‚ö†Ô∏è Instalada mas mal configurada",
          "not_installed": "‚ùå N√£o instalada", 
          "outdated": "üîÑ Vers√£o desatualizada"
        }
      },
      {
        "phase": 4,
        "name": "context_update",
        "description": "Atualiza√ß√£o do Context Memory com informa√ß√µes da stack",
        "update_targets": [
          ".zoe/rules/context/projects/[active_project]/project-context.json",
          "tech_stack.dependencies_verified",
          "tech_stack.versions",
          "current_context.last_updated",
          "project_metrics.stack_health"
        ]
      },
      {
        "phase": 5,
        "name": "generate_report",
        "description": "Gera√ß√£o de relat√≥rio completo da stack",
        "report_sections": [
          "stack_detected",
          "alerts_suggestions", 
          "stack_metrics",
          "auto_actions"
        ]
      }
    ]
  },

  "output_format": {
    "complete_report": {
      "template": "üõ†Ô∏è **Stack Atualizada**\n\nüìä **Frontend:**\n[frontend_info]\n\nüé® **Estilo:**\n[styling_info]\n\nüß™ **Testes:**\n[testing_info]\n\nüìö **Documenta√ß√£o:**\n[docs_info]\n\n‚ö†Ô∏è **Alertas & Sugest√µes:**\n[alerts_suggestions]\n\nüìà **M√©tricas de Stack:**\n[stack_metrics]",
      "variables": {
        "frontend_info": "React, Next.js, TypeScript versions and status",
        "styling_info": "CSS framework and configuration status",
        "testing_info": "Testing setup and configuration",
        "docs_info": "Documentation tools status",
        "alerts_suggestions": "Updates needed and optimizations",
        "stack_metrics": "Health score and compatibility metrics"
      }
    },
    "manual_mode": {
      "template": "üîß **Stack Manual Update:** [manual_action]\n\n‚úÖ **A√ß√£o realizada:** [action_description]\n\nüìä **Contexto atualizado:** Stack information refreshed",
      "variables": {
        "manual_action": "specific manual action requested",
        "action_description": "description of action performed"
      }
    }
  },

  "manual_commands": {
    "description": "Comandos manuais espec√≠ficos para altera√ß√µes na stack",
    "patterns": [
      {
        "trigger": "atualizar stack adicionar [tecnologia]",
        "action": "add_technology_to_stack"
      },
      {
        "trigger": "atualizar stack remover [tecnologia]", 
        "action": "remove_technology_from_stack"
      },
      {
        "trigger": "atualizar stack vers√£o [tecnologia] [vers√£o]",
        "action": "update_technology_version"
      }
    ]
  },

  "integration": {
    "post_execution": [
      {
        "action": "update_progress",
        "description": "Register stack changes in daily progress"
      },
      {
        "action": "context_updater",
        "description": "Update project context with new stack information"
      }
    ],
    "context_memory_update": {
      "mandatory": true,
      "description": "Always update project context with detected stack information"
    }
  }
} 